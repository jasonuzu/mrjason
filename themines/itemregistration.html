<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Canvas Cursed Item Generator</title>
<style>
body { background:#0c0c10; color:#eaeaf0; font-family:system-ui,sans-serif; padding:20px; }
button { background:#1e1e2b; color:white; border:1px solid #444; padding:10px 14px; cursor:pointer; margin-right:10px; }
#itemBox { margin-top:20px; display:flex; gap:20px; align-items:flex-start; }
canvas { border:1px solid #333; background:#0f0f14; }
pre { background:#0f0f14; padding:10px; max-width:650px; overflow:auto; font-size:12px; }
</style>
</head>
<body>

<h1>Canvas Cursed Item Generator</h1>
<p>Total World Catalogue: <span id="worldCount">0</span></p>
<button onclick="generateItem()">Generate Item</button>

<div id="itemBox">
  <canvas id="canvas" width="250" height="250"></canvas>
  <pre id="data"></pre>
</div>

<script>
// --- Pre-made image layers ---
// For prototype, weâ€™ll simulate with colored rectangles + icons
const BASE=["Bottle","Mug","Knife","Ring","Shoe","Coin","Trash Can","Helmet","Plate"];
const MATERIALS=["Glass","Iron","Bone","Plastic","Stone","Wood","Cloth"];
const TIERS=["Minor Anomaly","Unpredictable Utility","Dual-Effect Artifact","Hazardous Implement","Volatile Relic","Dangerous Artifact","Cataclysmic Curse"];
const EFFECTS=["Enhancement","Restoration","Alteration","Clarity","Emotion","Perception","Elemental","Spatial","Temporal","Summoning","Binding","Divination"];
const ICONS={"Enhancement":"âš¡","Restoration":"â¤ï¸","Alteration":"ðŸ”„","Clarity":"ðŸ§ ","Emotion":"ðŸ˜¨","Perception":"ðŸ‘ï¸","Elemental":"ðŸ”¥","Spatial":"ðŸ“¦","Temporal":"â±ï¸","Summoning":"ðŸ‘¾","Binding":"ðŸ”—","Divination":"ðŸ”®"};

let WORLD_COUNT=0;

// Helper functions
function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}
function colorForMaterial(mat){
  const map={"Glass":"#aaffff","Iron":"#ccc","Bone":"#fff","Plastic":"#ffcc66","Stone":"#888","Wood":"#c17a3a","Cloth":"#9c6"};
  return map[mat]||"#999";
}

// --- Main generation ---
function generateItem(){
  WORLD_COUNT++;
  document.getElementById("worldCount").textContent=WORLD_COUNT;

  // Random traits
  const base=pick(BASE);
  const material=pick(MATERIALS);
  const tier=pick(TIERS);
  const effect1=pick(EFFECTS);
  const effect2=Math.random()>0.5?pick(EFFECTS):null;
  const description=`This ${base} has effect ${effect1} (positive/negative).${effect2?(" Also "+effect2+" effect applies."):""}`;

  // Canvas draw
  const canvas=document.getElementById("canvas");
  const ctx=canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Base shape
  ctx.fillStyle=colorForMaterial(material);
  ctx.fillRect(50,50,150,150); // simple rectangle

  // Effect icon
  ctx.font="40px serif";
  ctx.fillStyle="#fff";
  ctx.textAlign="center";
  ctx.textBaseline="middle";
  ctx.fillText(ICONS[effect1]||"â”",125,125);

  // Optional glow for dangerous tiers
  if(TIERS.indexOf(tier)>=3){
    ctx.strokeStyle="rgba(255,255,255,0.3)";
    ctx.lineWidth=4;
    ctx.strokeRect(45,45,160,160);
  }

  // Display metadata
  document.getElementById("data").textContent=
`Base: ${base}
Material: ${material}
Tier: ${tier}
Effect1: ${effect1}
Effect2: ${effect2||"-"}
Description: ${description}`;
}
</script>

</body>
</html>
